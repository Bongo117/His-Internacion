extends layout

block content
  .fondo-admisiones
  .contenido-box
    h1= titulo

    table.table.table-striped
      thead
        tr
          th Paciente
          th Fecha de Admisión
          th Motivo
          th Tipo de Ingreso
          th Cama
          th Habitación
          th Estado
          th Acciones
      tbody
        each admision in admisiones
          tr
            td= admision.nombre + ' ' + admision.apellido
            td= new Date(admision.fecha_admision).toLocaleDateString('es-AR')
            td= admision.motivo
            td= admision.tipo_ingreso
            td= admision.cama_numero
            td= admision.habitacion_numero
            td= admision.estado
            td 
              .d-flex.flex-column.gap-2
                a.btn.btn-info.btn-sm.w-100(href=`/admisiones/${admision.id_admision}/detalle`)
                  i.bi.bi-eye-fill.me-1
                  | Ver Detalle
                if admision.estado === 'activa'
                  a.btn.btn-primary.btn-sm.w-100(href=`/evaluaciones/nueva/${admision.id_admision}`)
                    i.bi.bi-pencil-square.me-1
                    | Evolucionar
                  form(method="POST", action=`/admisiones/${admision.id_admision}/finalizar`)
                    button.btn.btn-danger.btn-sm.w-100(type="submit", onclick="return confirm('¿Finalizar esta admisión?');")
                      i.bi.bi-check-circle-fill.me-1
                      | Finalizar
                  form(method="POST", action=`/admisiones/${admision.id_admision}/cancelar`)
                    button.btn.btn-secondary.btn-sm.w-100(type="submit", onclick="return confirm('¿Cancelar esta admisión?');")
                      i.bi.bi-x-circle-fill.me-1
                      | Cancelar

    a.btn.btn-secondary.mt-3(href="/") Volver al inicio
