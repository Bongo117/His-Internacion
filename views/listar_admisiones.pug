extends layout

block content
  .fondo-admisiones
  .contenido-box
    h1= titulo

    table.table.table-striped
      thead
        tr
          th Paciente
          th Fecha de Admisión
          th Motivo
          th Tipo de Ingreso
          th Cama
          th Habitación
          th Estado
          th Acciones
      tbody
        each admision in admisiones
          tr
            td= admision.nombre + ' ' + admision.apellido
            td= new Date(admision.fecha_admision).toLocaleDateString('es-AR')
            td= admision.motivo
            td= admision.tipo_ingreso
            td= admision.cama_numero
            td= admision.habitacion_numero
            td
              if admision.estado === 'activa'
                span.badge.bg-success.text-white Activa
              else if admision.estado === 'finalizada'
                span.badge.bg-secondary Finalizada
              else if admision.estado === 'cancelada'
                span.badge.bg-danger Cancelada

            td
              if admision.estado === 'activa'
                form(method="POST", action=`/admisiones/finalizar/${admision.id_admision}`, style="display:inline;")
                  button.btn.btn-outline-success.btn-sm(type="submit", onclick="return confirm('¿Finalizar admisión?');")
                    i.bi.bi-check-circle.me-1
                    | Finalizar

                form(method="POST", action=`/admisiones/cancelar/${admision.id_admision}`, style="display:inline; margin-left: 5px;")
                  button.btn.btn-outline-danger.btn-sm(type="submit", onclick="return confirm('¿Cancelar admisión?');")
                    i.bi.bi-x-circle.me-1
                    | Cancelar

    a.btn.btn-secondary.mt-3(href="/") Volver al inicio

